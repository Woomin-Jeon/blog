---
title: "네트워크 구조 스터디 3"
date: 2020-02-04
tag: ["Study"]
---


## "그림으로 배우는 네트워크 구조" 스터디 3

### 3장: TCP/IP 통신구조

- 가변길이 서브넷 마스크와 CIDR
  - 2장에서 서브넷 마스크에 대해 공부하였다. 그러나 최근에는 서브넷 별로 서브넷마스크의 길이를 다르게 할 수 있는데 이 기술을 "가변길이 서브넷 마스크"라고 한다. 이를 사용하면 서브넷별로 접속할 컴퓨터의 수를 유연하게 결정할 수 있다.
  - CIDR이란, IP 주소의 클래스와 무관하게 네트워크부를 짧다고 간주함으로써 여러 개의 네트워크로의 전송에 대해 한 개의 전송 규칙으로 맞출 수 있는 기술이다.

- MAC 주소
  - MAC 주소는 이더넷 등의 네트워크 "하드웨어"에 하나씩 할당되어 있는 주소로 원칙적으로는 다른 것과 중복되지 않는 유일한 값을 가진다. 현재는 허브/스위치가 어떤 포트에 어떤 MAC 주소의 컴퓨터가 연결돼있는지를 MAC 주소 테이블을 통해 기억하고 있다. 허브/스위치에 이더넷 프레임이 도착하면 먼저 그 MAC 주소를 조사한다. 그리고 MAC 주소 테이블에서 그 MAC 주소를 가진 기기가 접속되어 있는 포트를 특정한 후, 그 포트로 이더넷 프레임을 송출한다.

- ARP가 필요한 이유
  - ARP는 2장에서 공부했듯이 IP주소로부터 MAC 주소를 얻어내는 프로토콜이다. 이더넷 하드웨어끼리는 MAC 주소에 의해 통신 대상을 지정하지만 TCP/IP 통신에서는 대상을 지정하는데 IP 주소를 사용한다. 그렇게 때문에 대상이 다른 네트워크에 있는 경우에는 IP 패킷을 라우터로 넘겨야 하는데, 이때 라우터의 IP 주소에서 MAC 주소를 얻을 필요가 있다. 이 경우 ARP로 IP 주소에서 MAC 주소를 얻은 후에 MAC 주소를 전송처로 지정된 이더넷 프레임을 사용해서 IP 패킷을 대상 컴퓨터로 보낸다.

- 도메인 명
  - 숫자의 나열에 불과한 IP 주소는 인간이 기억하기 어렵기 때문에, 인간이 다룰 수 있는 범위에 맞춰 네트워크 상의 컴퓨터 명칭으로 "도메인 명"을 쓴다.

- 라우팅과 기본 게이트웨이
  - 라우팅이랑 라우터가 라우팅테이블을 기반으로 패킷을 전송하는 것을 의미한다.
  - 기본 게이트웨이란 자신이 소속된 네트워크 이외의 곳으로 보내려는 패킷에 대해 우선 전송해두는 곳이라고 말할 수 있다.

- 정적 라우팅과 동적 라우팅
  - 라우터에는 라우팅테이블이라는 것이 있는데, 이 라우팅 테이블을 수동으로 관리해주는 것을 "정적 라우팅"이라고 하고, 라우터 스스로 라우팅 테이블을 자동 관리하는 것을 "동적 라우팅"이라고 한다. 정적 라우팅은 네트워크 전체 규모가 아주 작을 때나 구성 변경이 그다지 없는 경우에 간단히 쓰는 방법이며, 동적 라우팅은 네트워크 전체 규모가 클 경우 사용되는 방법이다.
    - 동적 라우팅에서 라우팅 테이블을 동적으로 갱신하는 데 사용되는 프로토콜이 있는데 이를 "라우팅 프로토콜"이라고 한다. 라우팅 프로토콜은 먼저 라우터끼리 정보를 교환하고, 수집한 경로 정보에서 최적 경로를 골라낸후, 라우팅 테이블에 갱신한다.
    - 라우팅 프로토콜은 크게 나눠서 IGP(Interior)와 EGP(Exterior)로 나뉘는데, 대규모 네트워크 내에서 사용되는 것은 IGP, 대규모 네트워크들 사이에 사용되는 것은 EGP이다.

- DHCP 서버
  - DHCP 서버는 네트워크에 접속되어 있는 컴퓨터들에 대해 필요한 네트워크 설정 정보를 자동으로 배포하기 위한 구조다. 와이파이와 같은 네트워크를 최초로 연결할 시에 잠시 로딩이 생기는 이유는 DHCP 서버가 자동으로 필요한 설정들을 해주기 때문이다.

- NAT와 NAPT
  - NAT는 몇개의 전역 IP 주소를 라우터에 할당해두고 LAN 내의 컴퓨터가 인터넷에 접속할 때에 이 중 하나를 이용해서 통신하는 방법이다. 이 방법을 사용할 시 인터넷에 동시에 접속할 수 있는 컴퓨터 대수는 라우터가 갖고 있는 전역 IP 주소의 수로 제한된다. 예를 들어 카페같은 곳의 와이파이에 너무 많은 사용자가 접속을 하게되면 접속이 안되는 경우가 있는데, 이 경우 전역 IP 주소를 모두 소진했기 때문으로 볼 수 있다.
  - NAPT는 IP 주소의 변환과 동시에 포트번호도 변환하는 것으로 한 개의 전역 IP 주소를 여러 대의 컴퓨터에서 공용으로 사용하는 방법이다. 인터넷을 송출할 때 자신의 IP 주소와 포트번호의 조합을 라우터의 전역 IP 주소와 라우터가 관리하는 포트번호의 조합으로 변환한다. 이 경우 라우터 한 개의 전역 IP 만으로도 LAN 내에 있는 여러 대의 컴퓨터가 다른 네트워크의 컴퓨터와 통신할 수 있다.
