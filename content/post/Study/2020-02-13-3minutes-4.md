---
title: 하루 3분 네트워크 교실 스터디 4
date: 2020-02-13
tag: [Study]
---

## "하루 3분 네트워크 교실" 스터디 4

### 4장: 라우팅

- MAC 주소와 IP 주소  
  MAC 주소와 IP 주소 모두 수신처를 의미하는 것인데, MAC 주소는 같은 네트워크 내에서의 수신처를 결정하고, IP 주소는 수신처의 컴퓨터를 결정하는 것이다. 그렇기 때문에 MAC 주소는 다음 수신처에 도착하면 그 수신처를 거점으로 다시 다음 수신처로의 MAC 주소로 변경된다. 이렇게 MAC 주소를 타고 타고 타서 도착하는 최종목적지 주소는 IP 주소인 것이다.  

- 라우팅 테이블  
  라우팅 테이블이란 라우터가 수신한 패킷이 수신처까지 도달하기 위한 최적의 경로 지도라고 볼 수 있다. 이 라우팅 테이블에서 수신처를 찾아낼 때, IP 주소의 비트열과 네트워크 주소의 비트열을 앞에서부터 순서대로 비교해서 가장 많이 일치하는 경로를 선택하게 되는데, 이를 `Longest Match(최장일치룰)`이라고 한다.

- 디폴트 게이트웨이  
  다른 네트워크로 데이터를 전송하고 싶은 호스트는 먼저 디폴트 게이트웨이로 ARP를 수행한다. 호스트는 수신처 MAC 주소를 디폴트 게이트웨이로, 수신처 IP 주소를 수신처 호스트로 해서 패킷을 보낸다. 수신받은 디폴트 게이트웨이는 라우팅을 하고, 다음에 수신받을 상대(중계라우터 또는 수신처)에게 ARP를 수행한다. ARP에 의해 입수한 MAC 주소를 수신처 MAC 주소로 갱신하고, 자기자신의 MAC 주소를 송신처 MAC 주소로 갱신하여 송신한다. 이때 IP 주소는 변경되지 않는다.

- 라우팅  
  라우터는 최적의 경로를 찾기 위해 다른 네트워크 경로를 모두 알아야 한다. 이 때 모든 경로 중에서 자동으로 최적의 경로를 선택해서 라우팅 테이블을 작성하는 것을 `동적 라우팅`이라고 한다. 이는 자동으로 장애를 제거할 수 있다는 장점이 있다. 하지만 라우터끼리 계속 정보를 교환해야 하기 때문에 회선 전송을 점유하여 데이터 전송에 사용되는 분량을 줄이는 단점이 있다.

- 라우팅 프로토콜  
  라우팅 프로토콜은 근접해있는 라우터 간의 네트워크 정보를 서로 교환하기 위한 규칙이다. 그리고 이렇게 교환한 정보를 근거로 라우팅 테이블을 자율적으로 갱신한다.

- RIP Metric  
  `메트릭(Metric)`이란 라우터가 최적의 경로를 찾아냄에 있어서 판단기준이 되는 것이다. 중계 라우터의 홉 수로 메트릭을 계산 한다.

- ICMP  
  `ICMP`란 인터넷 제어 메세지 프로토콜로, 에러 보고 프로토콜이라고 할 수 있다. ICMP 패킷은 일반적인 IP 패킷과 달리 세그먼트와 데이터 데신 ICMP 메세지가 들어간다.

- TTL  
  `TTL(Time to Live)`이란 라우터를 경유할 때마다 IP 데이터그램 안에 있는 TTL을 1만큼씩 감소시켜서 최종적으로 0이 되면 그 데이터를 파괴하는 것이다. 이렇게 처리하는 이유는 라우팅 경로 정보에 오류가 나는 경우 데이터가 수신처에 도달하지 못하고 이상한 곳으로 가버리던지 같은 장소를 빙글빙글 돌면서 네트워크에 방해를 줄 수 있기 때문에 이런 데이터를 라우팅 실패된 데이터로 간주하고 파기함으로써 해결하기 위해서이다.

- traceroute  
  traceroute는 도중에 어떠한 경로를 통해서 가는지 알아낼 수 있는 명령어이다. TTL = 1에서 수신처에 패킷을 보내서 첫번째 라우터가 보낸 Time Exceeded를 바탕으로 어떤 라우터인지를 받아오고, TTL = 2에서 수신처에 패킷을 보내 두번째 라우터의 정보를 받아오고, TTL = 3에서 ... , TTL = n에서 수신처에 패킷을 보내 n번째 라우터의 정보를 받아와서 최종 목적지까지 경유하는 라우터 표를 만들 수 있다.
