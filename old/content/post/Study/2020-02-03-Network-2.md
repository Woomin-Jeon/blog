---
title: "그림으로 배우는 네트워크 구조 스터디 2"
date: 2020-02-03
tag: ["Study"]
---


## "그림으로 배우는 네트워크 구조" 스터디 2

### 2장: TCP/IP 기본지식

- TCP/IP의 레이어
  - TCP/IP는 네 개의 레이어로 구성되어, 하위 층에서 구현한 기능은 상위층에서 활용된다.  
  [4. 애플리케이션 층  
  [3. 트랜스포트 층  
  [2. 인터넷 층  
  [1. 네트워크 인터페이스 층  

- 네트워크 인터페이스층의 역할
  - "네트워크 인터페이스층"은 직접 접속된 기기간의 통신을 구현한다. 이 층의 담당하는 것은 어디까지나 "직접" 연결 되어있는 컴퓨터 간의 통신으로, 인터네트워킹의 기능은 갖고있지 않다.  
  대표적인 프로토콜로는 "이더넷"이 있다. 그리고 이 이더넷을 사용해서 1:1 접속을 가능하게 하는 프로토콜로 PPPoE가 있으며, 이는 인증기능에 많이 사용된다.  
  또한, IP주소에서 MAC주소를 얻는 "ARP" 프로토콜과, MAC주소에서 IP주소를 얻는 "RARP" 프로토콜이 있다.

- 인터넷층의 역할
  - 인터넷층은 인터네트워킹, 즉 복수개의 네트워크를 연결해서 서로 패킷을 교화하는 기능을 구현한다. 다시말해 네트워크 인터페이스층에서는 "직접" 연결된 기기간의 통신만을 구현했다면 인터넷층에서는 직접 연결되어있지 "않은" 기기 간에도 통신을 가능하게 한다는 것이다.  
  대표적인 프로토콜로는 "IP"가 있다. IP는 직접 연결되어 있는 컴퓨터끼리 구성한 "개별 네트워크끼리" 필요에 따라 라우팅을 하도록 한다.

- 트랜스포트층의 역할
  - 트랜스포트층은 인터넷층이 만들어낸 임의의 컴퓨터끼리의 통신 기능을 기반으로, 네트워크의 사용 목적에 따른 특성을 가진 통신을 구현한다.
  대표적인 프로토콜로는 TCP와 UDP가 있다.  
  TCP는 데이터가 목적지에 제대로 갔는지 확인하고, 아닐 시 재전송 등을 수행하는 등의 신뢰도가 높은 통신을 구현하는 프로토콜이다. TCP는 이렇게 신뢰도가 높은 통신을 구현하기 위해 "슬라이딩 윈도우" 구조로 되어있으며, TCP에 접속할 때는 "3-웨이 핸드쉐이크", 접속을 종료할 때는 "4-웨이 핸드쉐이크" 방식을 이용한다. TCP는 Web을 위한 HTTP, 메일 송수신을 위한 SMTP 등에 쓰인다.
  UDP는 통신을 가볍게 처리하도록 해서 실시간 성격이 큰 통신을 구현하는 프로토콜이다. 음악이나 동영상 스트리밍, 인터넷 전화 등에 쓰인다.

- 애플리케이션층의 역할
  - 최상층에 위치한 애플리케이션층은 mail, web 등 개별 애플리케이션의 구체적인 통신 서비스를 구현한다. 아래에 있는 트랜스포트층이 만들어내는 "목적에 맞는 통신 기능" 중에서 애플리케이션에 적합한 것을 고르고, 이를 사용하여 애플리케이션 프로그램끼리 데이터를 주고받는다.

- 레이어별 처리와 패킷의 관계
  - 프로토콜 스택을 구성하는 레이어는 아래위로 인접하는 층과 연게해서 통신을 처리한다. 그리고 이런 연계를 위해 필요한 각종 정보를 데이터 본체 앞에다가 추가하는데 이를 "헤더"라고 부른다.  
  데이터가 A컴퓨터의 애플리케이션 층에서부터 시작아여 B컴퓨터의 애플리케이션 층까지 가기까지의 과정을 보면,  
  A컴퓨터에서는 4층 -> 3층 -> 2층 -> 1층으로 하나하나 내려가면서 헤더를 붙인다. 이렇게 N층에서 붙인 헤더는 N층에서만 떼어낼 수 있다. 예를들어 A컴퓨터 3층에서 붙인 헤더는 B컴퓨터 3층에서 뗄 수 있다는 것이다. 이런식으로 A컴퓨터는 헤더를 붙이고 최 하위층인 네트워크 인터페이스 층을 나가서 B컴퓨터의 네트워크 인터페이스 층에 도달한다. 그리고 1층 -> 2층 -> 3층 -> 4층으로 하나하나 헤더를 떼면서 올라간다. 그리고 결국 B컴퓨터의 최상층인 애플리케이션층에서는 데이터에 붙어있는 모든 헤더들이 제거되고 순수한 데이터만이 남게된다.

- IP 주소와 포트번호
  - IP 주소란 IP라고 불리는 프로토콜을 사용하는 네트워크에서 각 컴퓨터를 식별하기 위해 컴퓨터에 부여한 번호다.
  - 포트번호란 트랜스포트층에서 TCP 또는 UDP가 제공하는 기능이, 대상이 갖고있는 어떤 기능과 접속할지 지정하기 위해 사용된다.
  - 이렇게 IP 주소와 포트번호를 둘 다 이용함으로써 어떤 컴퓨터(IP 이용)의 어떤 기능(포트번호 이용)의 사용과 같은 형식으로 지정할 수 있게 된다. 예를들어 "IP: 192.0.113.43, 포트번호: 80" 203.0.113.43 컴퓨터의 웹(80) 기능이라고 볼 수 있다.
  즉, 쉽게 말해 호텔의 주소는 IP, 그리고 호텔의 방번호는 포트번호라고 볼 수 있으며, 데이터는 IP를 보고 해당 컴퓨터로 들어간 뒤, 포트번호를 보고 "이 프로그램이군" 하며 찾아간다.

- IP 주소의 클래스와 넷마스크
  - IP 주소는 32개의 비트로 표시할 수 있는데, 왼쪽이 네트워크부이고 오른쪽이 호스트부이다. 네트워크부는 어떤 네트워크인지를 특정하고, 호스트부는 그 네트워크 안의 어떤 컴퓨터인지를 특정한다.
  - IP 주소에는 클래스라는 개념이 있는데, 클래스는 A ~ E 까지 존재하며, 우리가 일반적으로 사용하는 클래스는 A ~ C 이다. A ~ C 의 차이는 한 개의 네트워크 주소 안에서 몇대의 컴퓨터를 구별할 수 있는가이다. A에서 C순서로 구별할 수 있는 컴퓨터의 대수가 작아진다.
  - IP 주소의 네트워크부에 해당하는 부분을 1로 한 비트의 나열을 "넷마스크"라고 하며, 이 넷마스크와 IP 주소를 대상으로 AND 연산을 하면 네트워크 주소를 추려낼 수 있다.

- 서브넷화
  - 한 개의 거대한 네트워크를 만들지 않고, 작은 네트워크로 나눠서 이들을 연결하는 구성을 서브넷화라고 한다. 서브넷화를 하는 경우 IP 주소에서 네트워크부를 더욱 연장하고 그만큼 호스트부를 줄인다. 즉, 호스트부의 일부까지 네트워크부로 사용한다.
  이렇게 호스트부를 줄여 네트워크 하나 당 들어갈 수 있는 컴퓨터 대수는 줄이고, 네트워크 개수를 늘려서 이 네트워크들을 연결하는 것이 서브넷화이다.

- 브로드캐스트와 멀티캐스트
  - 브로드캐스트란 동일한 이더넷에 접속해있는 컴퓨터 전체로 데이터를 보내는 통신을 말한다. 주의할 점은 라우터를 넘어서는 브로드캐스트는 안된다.
  - 멀티캐스트는 어떤 그룹에 포함된 특정 컴퓨터에 한정해서 데이터를 보내는 것이다. 얘는 라우터를 넘어서는 것이 가능하다.

- 허브와 스위치
  - A컴퓨터에서 C컴퓨터로 데이터 전송을 하고 싶을 때, 허브를 사용하면 B, C, D 컴퓨터 모두에게 가지만, 스위치를 사용하면 C에게만 보낼 수 있다.
  - 허브/스위치는 이더넷의 신설이나 확장에 사용하는 것이다. 이더넷과 이더넷을 라우터로 묶으면 네트워크 연결을 하는 것이지만, 이더넷과 이더넷을 허브/스위치로 묶으면 보다 규모가 큰 하나의 이더넷이 된다.

- 라우터의 역할
  - 라우터는 서로 독립되어있는 이더넷 네트워크 사이에서 양쪽의 패킷을 중계하는 역할을 한다. 라우터는 IP 네트워크에서 중요한 역할을 담당하고 있는데, A컴퓨터가 다른 이더넷에 위치한 B컴퓨터와 통신하기 위해서는, A컴퓨터의 TCP가 IP에게 데이터 전송을 의뢰함으로써 B컴퓨터에게 데이터를 보낼 수 있다. 즉, 이더넷과 이더넷을 IP 층을 이용해서 연결하는 것이다.
  