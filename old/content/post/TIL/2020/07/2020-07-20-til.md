---
title: 2020-07-20 TIL
date: 2020-07-20
tag: [TIL]
---

## Facts

- 웹 사이트 외주를 맡고있는 로그랩에서 제가 만든 웹 사이트가 IE에서 작동하지 않는다는 이야기를 들었습니다. 크롬 및 다른 브라우저들에서는 잘 작동하는데 IE에서만 작동하지 않았습니다. 로그랩이 앞두고 있는 거래사가 IE를 사용하고 있었기 때문에 저는 이 문제를 해결해야 했고 해결 방안을 탐색해보았습니다.
- 먼저, IE가 \<iframe\> 태그를 지원하지 않는다고 판단하고, 이를 대체하는 \<embed\>, \<object\> 태그로 변경하여 사용해보았습니다. 하지만 역시 크롬에서는 잘 작동하나 IE에서는 작동하지 않았습니다. 구글 맵 같은 경우는 \<iframe\> 태그를 사용하여 불러와도 문제가 없었기 때문에 \<iframe\>의 문제는 아니라고 판단하였습니다.
- 다음으로, 리액트의 문제가 아닐까 생각하여 구글링을 통해 react가 IE에서 먹히지 않는다는 사실을 확인했습니다. 이놈이 문제로구나! 싶어서 react를 IE에서 돌아가게하는 방법을 찾아보았고, react-polyfill이 존재한다는 것을 알게되었습니다. 그리고 이를 적용하였습니다. 하지만 IE에서는 여전히 작동하지 않았습니다. 무언가 제가 react-polyfill에 대해 놓치고 있는 것이 있는지 판단해서 이쪽으로 많이 뒤져보았습니다. 하지만 저 이외의 다른 사람들은 이것 이외에 별다르게 적용한 것은 없었고 다른 이슈는 없어보였습니다.
- 분명 리액트의 문제인데 도저히 제가 해결하지 못할 것 같아서 그냥 웹사이트를 바닐라 자바스크립트로 만들어버리려고 했습니다. 간단한 hello world와 버튼이벤트를 추가한 뒤 배포부터 해보았는데, IE에서 렌더링은 잘 되나 이벤트가 먹히질 않았습니다. 확인해본 결과 Arrow Function을 읽지 못하는 것이었습니다. 여기서 번뜩 생각이 들었습니다. "Babel!"  
제 코드가 ES6+였기 때문에 ES5까지만 지원하는 IE11이 읽지 못하는 것이었습니다. 그렇다면 리액트 문제라기보다는 근본적으로 Babel 문제라고 판단하였습니다.
- 다시 로그랩에 외주한 리액트 코드에서 Babel 설정을 살펴보았습니다. 별다른 점을 발견하지 못하고 포기하려던 찰나, 김정환님의 블로그에서 Babel 설정하는 포스팅을 보게되었고, 여기서 힌트를 얻었습니다. 바로 @babel/preset-env에서 target 설정에 제가 ie를 넣어주지 않아서 발생한 문제였습니다. target에 ie:11을 삽입하였고, 다시 bundle하여 배포하였더니 제 웹 사이트가 IE 환경에서도 잘 작동하는 것을 확인할 수 있었습니다.

## Feelings

- 장장 6시간 동안의 삽질을 통해 결국 해결해냈습니다. 문제를 해결했을 때의 이정도 카타르시스는 정말 오랜만에 느껴보는 것 같습니다. 휴!!

## Findings

- Babel을 사용하여 IE에서도 구동되는 웹 어플리케이션을 만드는 방법을 알게되었습니다.

## Future Action Plans

- 솔직히 엄청 예전에 Babel에 대해 한 번 공부해보았고, 그때도 사실 아무것도 모르는 상태에서 공부한 것이라 대충 이런거구나 하고 넘어갔었는데 이렇게 발목을 잡네요.
- 그래도 이번 기회에 Babel의 역할에 대해 더욱 잘 알 수 있었고, 부족하다는 것도 깨닫게 되었습니다. Babel과 Webpack을 이제는 다시 공부해본다면 더 명확하게 알아갈 수 있지 않을까 싶습니다. 해봐야겠네요.

## Feedback

- Babel과 Webpack을 다시 공부하자. 아직 안했다...
